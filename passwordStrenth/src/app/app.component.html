<h1 id="smile">Welcome back, wanderer.</h1>
<!-- additional class for this particular form is ${element_name}-gray-green
      this would allow you to style it separately from other containers -->
<section class="container-gray-green">
  <!-- <h1>CHOOOPA!</h1> -->
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-gray-green">
    <label for="username"><b>Username</b>
      <span *ngIf="name?.invalid && (name?.dirty || name?.touched)" class="alert alert-danger">Username is required
      </span>
    </label>
    <input formControlName="username" class="input-gray-green" type="text" autocomplete="off" placeholder=""
      name="username" id="username" title="Fill in your username, please." required>
    <label for="psw"><b>Password</b>
      <span *ngIf="psw?.invalid && (psw?.dirty || psw?.touched)" class="alert alert-danger">Check your password
      </span>
    </label>
    <input formControlName="password" class="input-gray-green" type="password" placeholder="" name="psw" id="psw"
      title="8 or more characters: at least 1 letter, 1 number, and 1 symbol." required>
    
    <div class="psw-strenth-bar psw-strenth-bar__line">
      <span [ngClass]="{
      gray: psw?.errors?.['required'],
      green: !psw?.invalid,
      red: (psw?.errors?.['minlength'] && !psw?.errors?.['required']) || (
        !psw?.errors?.['required'] && 
        ((psw?.errors?.['no_letters'] && psw?.errors?.['no_digits']) || (psw?.errors?.['no_symbols'] && psw?.errors?.['no_digits']) || (psw?.errors?.['no_letters'] && psw?.errors?.['no_symbols']))
        ),
      yellow: ((psw?.errors?.['no_letters'] && !psw?.errors?.['no_digits'] && !psw?.errors?.['no_symbols']) && (!psw?.errors?.['required'] && !psw?.errors?.['minlength']))
        || ((psw?.errors?.['no_digits']  && !psw?.errors?.['no_letters'] && !psw?.errors?.['no_symbols']) && (!psw?.errors?.['required'] && !psw?.errors?.['minlength']))
        || ((psw?.errors?.['no_symbols'] && !psw?.errors?.['no_letters'] && !psw?.errors?.['no_digits']) && (!psw?.errors?.['required'] && !psw?.errors?.['minlength']))}">&nbsp;</span>
      <span [ngClass]="{
        gray: psw?.errors?.['required'] ||
        (psw?.errors?.['minlength'] && !psw?.errors?.['required']) || (
        !psw?.errors?.['required'] && 
        ((psw?.errors?.['no_letters'] && psw?.errors?.['no_digits']) || (psw?.errors?.['no_symbols'] && psw?.errors?.['no_digits']) || (psw?.errors?.['no_letters'] && psw?.errors?.['no_symbols']))
        ),
        green: !psw?.invalid,
        red: psw?.errors?.['minlength'],
        yellow: (psw?.errors?.['no_letters'] && !psw?.errors?.['no_digits'] && !psw?.errors?.['no_symbols'] && !psw?.errors?.['minlength']) 
        || (psw?.errors?.['no_digits']  && !psw?.errors?.['no_letters'] && !psw?.errors?.['no_symbols'] && !psw?.errors?.['minlength']) 
        || (psw?.errors?.['no_symbols'] && !psw?.errors?.['no_letters'] && !psw?.errors?.['no_digits'] && !psw?.errors?.['minlength'])
        && !psw?.errors?.['required'] && !psw?.errors?.['minlength']}">&nbsp;</span>
      <span [ngClass]="{
        gray: psw?.errors?.['required'] || (psw?.invalid && !psw?.errors?.['minlength']),
        green: !psw?.invalid, red: psw?.errors?.['minlength']}">&nbsp;</span>
    </div>
    <div class="psw-strenth-bar">
      <span [ngClass]="{green: !psw?.errors?.['no_letters'], yellow: psw?.errors?.['no_letters'] && psw?.dirty}" class="psw-strenth-bar__letters">letters</span>
      <span [ngClass]="{green: !psw?.errors?.['no_digits'], yellow: psw?.errors?.['no_digits'] && psw?.dirty}" class="psw-strenth-bar__digits">digits</span>
      <span [ngClass]="{green: !psw?.errors?.['no_symbols'], yellow: psw?.errors?.['no_symbols'] && psw?.dirty}" class="psw-strenth-bar__symbols">symbols</span>
    </div>
    <button type="submit" [disabled]="form.invalid" class="button-gray-green">Login</button>
  </form>
</section>
<p>Form Value: {{ form.value | json }}</p>
<p>Password Errors: {{ psw?.errors | json }}</p>
<!-- <div class="container"><p>CHOOOPA</p></div> -->